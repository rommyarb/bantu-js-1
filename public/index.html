<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tugas JS</title>
    <style>
      #people {
        display: grid;
        margin-top: 10px;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        grid-column-gap: 10px;
        grid-row-gap: 10px;
      }
    </style>
  </head>
  <body>
    <div style="display: flex">
      <div>
        <div style="margin-bottom: 20px">
          <div>Nama</div>
          <input type="text" />
        </div>
        <div>
          <div>Gender</div>
          <select style="width: 100%">
            <option value="Pria">Pria</option>
            <option value="Wanita">Wanita</option>
          </select>
        </div>
      </div>
      <div style="margin-left: 20px">
        <div style="margin-bottom: 20px">
          <div>Umur</div>
          <input type="number" />
        </div>
        <div>
          <div>Status</div>
          <select style="width: 100%">
            <option value="Single">Single</option>
            <option value="Married">Married</option>
          </select>
        </div>
      </div>
    </div>
    <hr style="margin: 25px 0" />
    <div>
      <div>Find</div>
      <form
        style="display: flex; align-items: center"
        action="#"
        onsubmit="find();return false"
      >
        <input
          id="filterNama"
          type="text"
          style="padding: 5px 5px"
          placeholder="Masukkan nama..."
        />
        <button style="margin-left: 5px; padding: 5px 10px" type="submit">
          Find
        </button>
      </form>
      <div id="people"></div>
    </div>
  </body>
</html>

<script>
  function find() {
    var filterNama = document.getElementById("filterNama").value;
    getData(filterNama);
  }
  async function getData(filterNama) {
    var peopleEL = document.getElementById("people");
    peopleEL.innerHTML = "";

    var req = await fetch("data.json");
    var json = await req.json();
    var people = json.people;
    if (filterNama) {
      people = people.filter(function (person) {
        if (person.nama.toLowerCase().includes(filterNama.toLowerCase())) {
          return true;
        }
        return false;
      });
    }

    console.log(people);

    people.forEach(function (person) {
      var containerEl = document.createElement("div");
      containerEl.style.border = "black 1px solid";
      containerEl.style.padding = "5px 20px";
      containerEl.style.backgroundColor = "lightgray";

      var personEl = document.createElement("div");
      personEl.innerHTML = `<div><img src="avatar.jpeg" style="width:30px;border-radius:9999px;margin-right:10px"/></div><div style="font-size:1.2rem">${person.nama}</div>`;
      personEl.style.display = "flex";
      personEl.style.alignItems = "center";

      var infoEl = document.createElement("div");
      infoEl.style.display = "flex";
      infoEl.style.alignItems = "center";
      infoEl.innerHTML = `<div style="width:100%;">${person.gender} / ${person.umur} tahun</div><div style="text-align:right">${person.status}</div>`;

      containerEl.appendChild(personEl);
      containerEl.appendChild(infoEl);
      peopleEL.appendChild(containerEl);
    });
  }

  getData();
</script>
